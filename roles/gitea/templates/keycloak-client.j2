apiVersion: keycloak.org/v1alpha1
kind: KeycloakClient
metadata:
  name: gitea
  namespace: keycloak
  labels:
    client: gitea
spec:
  realmSelector:
    matchLabels:
        realm: {{ gitea.keycloak_realm }}
  client:
    clientId: "gitea"
    # todo: make dynamic
    secret: "57abfc51-716f-4b0a-8922-9a5eeba73342"
    clientAuthenticatorType: client-secret
    protocol: openid-connect
    redirectUris:
    - "https://code.{{ cluster_name}}.{{ cluster_domain }}/*"
    directAccessGrantsEnabled: True
    standardFlowEnabled: True
    authorizationEnabled: True
    authorizationServicesEnabled: True
    serviceAccountsEnabled: True
    enabled: True
